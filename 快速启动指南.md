# 快速启动指南

## 🚀 启动MySQL版本火车票售票系统

### 问题：端口3000被占用

如果遇到 `Error: listen EADDRINUSE: address already in use :::3000` 错误，按以下步骤操作：

## 📋 启动步骤

### 步骤1: 停止占用端口的进程

**方法1: 使用任务管理器**
1. 按 `Ctrl + Shift + Esc` 打开任务管理器
2. 找到所有名为 `node.exe` 的进程
3. 选中并点击"结束任务"

**方法2: 使用命令行**
```cmd
taskkill /f /im node.exe
```

### 步骤2: 确保MySQL服务运行

```cmd
net start mysql
```

如果MySQL未安装，请先安装MySQL Server。

### 步骤3: 安装依赖

```cmd
npm install
```

### 步骤4: 启动服务器

**方法1: 使用批处理文件（推荐）**
```cmd
start-mysql-server.bat
```

**方法2: 使用PowerShell脚本**
```powershell
.\start-mysql-server.ps1
```

**方法3: 直接启动**
```cmd
node back-end.js
```

## 🧪 验证启动成功

启动成功后，您应该看到：
```
火车票售票系统后端已启动，端口：3000
数据库：MySQL
访问测试页面：http://localhost:3000/mysql-test.html
```

### 测试访问：
- 数据库连接测试: http://localhost:3000/test-db
- 主测试页面: http://localhost:3000/mysql-test.html

## 🔧 常见问题解决

### 1. 端口仍然被占用

```cmd
# 查看端口占用
netstat -ano | findstr :3000

# 强制停止进程（替换PID为实际进程ID）
taskkill /f /pid [PID]
```

### 2. MySQL连接失败

- 确保MySQL服务已启动：`net start mysql`
- 检查数据库配置（默认：用户名root，密码为空）
- 确认端口3306可用

### 3. 依赖安装失败

```cmd
# 清理npm缓存
npm cache clean --force

# 重新安装
npm install
```

### 4. 修改端口（如果3000端口冲突）

编辑 `back-end.js` 文件，修改端口号：
```javascript
const PORT = process.env.PORT || 3001;  // 改为3001或其他端口
```

## 🎯 测试步骤

1. **快速数据库测试**
   ```cmd
   node mysql-quick-test.js
   ```

2. **访问Web测试页面**
   ```
   http://localhost:3000/mysql-test.html
   ```

3. **测试API接口**
   ```
   GET http://localhost:3000/trains
   GET http://localhost:3000/test-db
   ```

## 💡 提示

- 如果启动脚本不工作，请直接使用命令行手动执行
- 确保在 `C:\Users\admin\Desktop\project` 目录下运行命令
- 如果还有问题，请检查Node.js和MySQL是否正确安装

---

🎉 **启动成功后，就可以开始测试MySQL版本的火车票售票系统了！** 